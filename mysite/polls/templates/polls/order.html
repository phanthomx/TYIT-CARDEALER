{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Document</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    </head>
    <body>
      

            <div>
                <h1>Order Information</h1>
                <p id="variant-type"></p>
                <p id="fuel-type"></p>
                <p id="color"></p>
                <p id="booking-price"></p>
                <p id="model-name"></p>
                <p id="total-price"></p>
                <h1> personal info </h>
                <div>
                <form  method="post" action="{% url 'initiate_payment' %}" >
                {% csrf_token %}
                        <input  type="hidden" id="var-type" /> 
                        <input  type="hidden" id="fuel" /> 
                        <input type="hidden" id="color-n" /> 
                        <input type="hidden" id="booking" /> 
                        <input type="hidden" id="model" /> 
                        <input  type="hidden" id="tot-price" /> 
                        <label for="fname">First Name:</label><br>
                        <input type="text" id="fname" name="fname" required><br>
                        <label for="lname">Last Name:</label><br>
                        <input type="text" id="lname" name="lname" required><br>
                        <label for="phone">Phone:</label><br>
                        <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" required><br>
                        <label for="email">Email:</label><br>
                        <input type="email" id="email" name="email" required><br>
                        <label for="address">Address:</label><br>
                        <textarea id="address" name="address" required></textarea><br>
                        <label for="file">Upload PDF/PNG:</label><br>
                        <input type="file" id="file" name="file" accept=".pdf,.png" required><br><br>
                        <label for="file">Upload PDF/PNG:</label><br>
                        <input type="file" id="file" name="file" accept=".pdf,.png" required><br><br>
                        <button type="submit">Pay Now</button>
                      
                    </form>
                </div>


                
            </div>
            

            <script>
                // Fetch the JSON data from the server
                var url_string = window.location;
                var url = new URL(url_string);
                var variant_type = url.searchParams.get("variant_type");
                var fuel_type = url.searchParams.get("fuel_type");
                var color = url.searchParams.get("color");
                var booking_price = url.searchParams.get("booking_price");
                var model_name = url.searchParams.get("model_name");
                var total_price = url.searchParams.get("total_price");
            
                // Set the extracted query parameters to the respective elements
                document.getElementById('variant-type').innerText = "Variant Type: " + variant_type;
                document.getElementById('var-type').value =  variant_type;
                document.getElementById('fuel-type').innerText = "Fuel Type: " + fuel_type;
                document.getElementById('fuel').value =  fuel_type;
                document.getElementById('color').innerText = "Color: " + color;
                document.getElementById('color-n').value =  color;
                document.getElementById('booking-price').innerText = "Booking Price: " + booking_price;
                document.getElementById('booking').value =  booking_price;
                document.getElementById('model-name').innerText = "Model Name: " + model_name;
                document.getElementById('model').value =  model_name;
                document.getElementById('total-price').innerText = "Total Price: " + total_price;
                document.getElementById('tot-price').value =  total_price;

            </script>
            
        
            <script>
                // Fetch the JSON data from the server
      
{% comment %}                
                    // Fetch the JSON data from the server
                         fetch('/orderinfo/')
                        .then(response => response.json())
                        .then(data => {
                            
                            // Manipulate the DOM with the received data
                            console.log(data);
                            // Display order data
                            {% comment %} 
                            document.getElementById('fuel-type').innerText = data.order_data.fuel_type;
                            document.getElementById('color').innerText = data.order_data.color;
                            document.getElementById('booking-price').innerText = data.order_data.booking_price;
                            document.getElementById('model-name').innerText = data.order_data.model_name;
                            document.getElementById('total-price').innerText = data.order_data.total_price; {% endcomment %}
                        }) 
                        {% comment %} .catch(error => console.error('Error:', error)); 
                </script> 
                {% comment %} {% endcomment %} 
    </body>
</html>